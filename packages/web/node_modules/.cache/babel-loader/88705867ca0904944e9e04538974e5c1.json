{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useDrag, useDrop } from \"react-dnd\";\nimport { DragItemTypes } from \"../../shared/drag-items\";\nexport function useNoteDragAndDrop(id, onInsideNoteDrop, onPositionalDrop) {\n  _s();\n\n  const [{\n    isDragging\n  }, noteDragRef] = useDrag(() => ({\n    type: DragItemTypes.NOTE,\n    item: {\n      id\n    },\n    collect: monitor => ({\n      isDragging: monitor.isDragging()\n    })\n  }), [id]);\n  const [noteDropzone, noteDropzoneRef] = useDrop(() => ({\n    accept: DragItemTypes.NOTE,\n    drop: item => {\n      onInsideNoteDrop(item.id, id);\n    },\n    canDrop: item => item.id !== id,\n    collect: monitor => ({\n      isOver: monitor.isOver(),\n      canDrop: monitor.canDrop()\n    })\n  }), [onInsideNoteDrop, id]);\n  const [upDropzone, upDropzoneRef] = useDrop(() => ({\n    accept: DragItemTypes.NOTE,\n    drop: item => {\n      onPositionalDrop(item.id, id, \"up\");\n    },\n    collect: monitor => ({\n      isOver: monitor.isOver()\n    })\n  }), [id, onPositionalDrop]);\n  const [downDropzone, downDropzoneRef] = useDrop(() => ({\n    accept: DragItemTypes.NOTE,\n    drop: item => {\n      onPositionalDrop(item.id, id, \"down\");\n    },\n    collect: monitor => ({\n      isOver: monitor.isOver()\n    })\n  }), [id, onPositionalDrop]);\n  const showPositionalDropzones = noteDropzone.isOver && noteDropzone.canDrop || upDropzone.isOver || downDropzone.isOver;\n  return {\n    isDragging,\n    showPositionalDropzones,\n    isOverUpDropzone: upDropzone.isOver,\n    isOverDownDropzone: downDropzone.isOver,\n    isOverNoteDropzone: noteDropzone.isOver,\n    canDrop: noteDropzone.canDrop,\n    upDropzoneRef,\n    downDropzoneRef,\n    noteRef: node => noteDragRef(noteDropzoneRef(node))\n  };\n}\n\n_s(useNoteDragAndDrop, \"9MH68JIueaH7Dd86I/F0GLs2akI=\", false, function () {\n  return [useDrag, useDrop, useDrop, useDrop];\n});","map":{"version":3,"names":["useDrag","useDrop","DragItemTypes","useNoteDragAndDrop","id","onInsideNoteDrop","onPositionalDrop","isDragging","noteDragRef","type","NOTE","item","collect","monitor","noteDropzone","noteDropzoneRef","accept","drop","canDrop","isOver","upDropzone","upDropzoneRef","downDropzone","downDropzoneRef","showPositionalDropzones","isOverUpDropzone","isOverDownDropzone","isOverNoteDropzone","noteRef","node"],"sources":["/Users/starkylife/projects/learning-system-app/packages/web/src/pages/notes/use-note-drag-and-drop.ts"],"sourcesContent":["import { ConnectableElement, useDrag, useDrop } from \"react-dnd\";\nimport { DragItemTypes } from \"../../shared/drag-items\";\n\nexport function useNoteDragAndDrop(\n  id: string,\n  onInsideNoteDrop: (draggingNoteId: string, dropNoteId: string) => void,\n  onPositionalDrop: (\n    draggingNoteId: string,\n    relatedNoteId: string,\n    position: \"up\" | \"down\"\n  ) => void\n) {\n  const [{ isDragging }, noteDragRef] = useDrag(\n    () => ({\n      type: DragItemTypes.NOTE,\n      item: { id },\n      collect: (monitor) => ({\n        isDragging: monitor.isDragging(),\n      }),\n    }),\n    [id]\n  );\n\n  const [noteDropzone, noteDropzoneRef] = useDrop(\n    () => ({\n      accept: DragItemTypes.NOTE,\n      drop: (item: { id: string }) => {\n        onInsideNoteDrop(item.id, id);\n      },\n      canDrop: (item) => item.id !== id,\n      collect: (monitor) => ({\n        isOver: monitor.isOver(),\n        canDrop: monitor.canDrop(),\n      }),\n    }),\n    [onInsideNoteDrop, id]\n  );\n\n  const [upDropzone, upDropzoneRef] = useDrop(\n    () => ({\n      accept: DragItemTypes.NOTE,\n      drop: (item: { id: string }) => {\n        onPositionalDrop(item.id, id, \"up\");\n      },\n      collect: (monitor) => ({\n        isOver: monitor.isOver(),\n      }),\n    }),\n    [id, onPositionalDrop]\n  );\n\n  const [downDropzone, downDropzoneRef] = useDrop(\n    () => ({\n      accept: DragItemTypes.NOTE,\n      drop: (item: { id: string }) => {\n        onPositionalDrop(item.id, id, \"down\");\n      },\n      collect: (monitor) => ({\n        isOver: monitor.isOver(),\n      }),\n    }),\n    [id, onPositionalDrop]\n  );\n\n  const showPositionalDropzones =\n    (noteDropzone.isOver && noteDropzone.canDrop) ||\n    upDropzone.isOver ||\n    downDropzone.isOver;\n\n  return {\n    isDragging,\n    showPositionalDropzones,\n    isOverUpDropzone: upDropzone.isOver,\n    isOverDownDropzone: downDropzone.isOver,\n    isOverNoteDropzone: noteDropzone.isOver,\n    canDrop: noteDropzone.canDrop,\n    upDropzoneRef,\n    downDropzoneRef,\n    noteRef: (node: ConnectableElement) => noteDragRef(noteDropzoneRef(node)),\n  };\n}\n"],"mappings":";;AAAA,SAA6BA,OAA7B,EAAsCC,OAAtC,QAAqD,WAArD;AACA,SAASC,aAAT,QAA8B,yBAA9B;AAEA,OAAO,SAASC,kBAAT,CACLC,EADK,EAELC,gBAFK,EAGLC,gBAHK,EAQL;EAAA;;EACA,MAAM,CAAC;IAAEC;EAAF,CAAD,EAAiBC,WAAjB,IAAgCR,OAAO,CAC3C,OAAO;IACLS,IAAI,EAAEP,aAAa,CAACQ,IADf;IAELC,IAAI,EAAE;MAAEP;IAAF,CAFD;IAGLQ,OAAO,EAAGC,OAAD,KAAc;MACrBN,UAAU,EAAEM,OAAO,CAACN,UAAR;IADS,CAAd;EAHJ,CAAP,CAD2C,EAQ3C,CAACH,EAAD,CAR2C,CAA7C;EAWA,MAAM,CAACU,YAAD,EAAeC,eAAf,IAAkCd,OAAO,CAC7C,OAAO;IACLe,MAAM,EAAEd,aAAa,CAACQ,IADjB;IAELO,IAAI,EAAGN,IAAD,IAA0B;MAC9BN,gBAAgB,CAACM,IAAI,CAACP,EAAN,EAAUA,EAAV,CAAhB;IACD,CAJI;IAKLc,OAAO,EAAGP,IAAD,IAAUA,IAAI,CAACP,EAAL,KAAYA,EAL1B;IAMLQ,OAAO,EAAGC,OAAD,KAAc;MACrBM,MAAM,EAAEN,OAAO,CAACM,MAAR,EADa;MAErBD,OAAO,EAAEL,OAAO,CAACK,OAAR;IAFY,CAAd;EANJ,CAAP,CAD6C,EAY7C,CAACb,gBAAD,EAAmBD,EAAnB,CAZ6C,CAA/C;EAeA,MAAM,CAACgB,UAAD,EAAaC,aAAb,IAA8BpB,OAAO,CACzC,OAAO;IACLe,MAAM,EAAEd,aAAa,CAACQ,IADjB;IAELO,IAAI,EAAGN,IAAD,IAA0B;MAC9BL,gBAAgB,CAACK,IAAI,CAACP,EAAN,EAAUA,EAAV,EAAc,IAAd,CAAhB;IACD,CAJI;IAKLQ,OAAO,EAAGC,OAAD,KAAc;MACrBM,MAAM,EAAEN,OAAO,CAACM,MAAR;IADa,CAAd;EALJ,CAAP,CADyC,EAUzC,CAACf,EAAD,EAAKE,gBAAL,CAVyC,CAA3C;EAaA,MAAM,CAACgB,YAAD,EAAeC,eAAf,IAAkCtB,OAAO,CAC7C,OAAO;IACLe,MAAM,EAAEd,aAAa,CAACQ,IADjB;IAELO,IAAI,EAAGN,IAAD,IAA0B;MAC9BL,gBAAgB,CAACK,IAAI,CAACP,EAAN,EAAUA,EAAV,EAAc,MAAd,CAAhB;IACD,CAJI;IAKLQ,OAAO,EAAGC,OAAD,KAAc;MACrBM,MAAM,EAAEN,OAAO,CAACM,MAAR;IADa,CAAd;EALJ,CAAP,CAD6C,EAU7C,CAACf,EAAD,EAAKE,gBAAL,CAV6C,CAA/C;EAaA,MAAMkB,uBAAuB,GAC1BV,YAAY,CAACK,MAAb,IAAuBL,YAAY,CAACI,OAArC,IACAE,UAAU,CAACD,MADX,IAEAG,YAAY,CAACH,MAHf;EAKA,OAAO;IACLZ,UADK;IAELiB,uBAFK;IAGLC,gBAAgB,EAAEL,UAAU,CAACD,MAHxB;IAILO,kBAAkB,EAAEJ,YAAY,CAACH,MAJ5B;IAKLQ,kBAAkB,EAAEb,YAAY,CAACK,MAL5B;IAMLD,OAAO,EAAEJ,YAAY,CAACI,OANjB;IAOLG,aAPK;IAQLE,eARK;IASLK,OAAO,EAAGC,IAAD,IAA8BrB,WAAW,CAACO,eAAe,CAACc,IAAD,CAAhB;EAT7C,CAAP;AAWD;;GA7Ee1B,kB;UASwBH,O,EAWEC,O,EAeJA,O,EAaIA,O"},"metadata":{},"sourceType":"module"}