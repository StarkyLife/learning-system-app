{"ast":null,"code":"import { InMemoryNotesGateway } from \"./in-memory-notes.gateway\";\nconst NOTES_KEY = \"notes\";\nexport class LocalStorageNotesGateway {\n  constructor() {\n    this.inMemoryGateway = void 0;\n\n    this.getMainNote = async () => {\n      const result = await this.inMemoryGateway.getMainNote();\n      this.updateData();\n      return result;\n    };\n\n    this.getNote = async id => {\n      const result = await this.inMemoryGateway.getNote(id);\n      this.updateData();\n      return result;\n    };\n\n    this.saveNote = async updatedNote => {\n      const result = await this.inMemoryGateway.saveNote(updatedNote);\n      this.updateData();\n      return result;\n    };\n\n    this.moveNote = async data => {\n      const result = await this.inMemoryGateway.moveNote(data);\n      this.updateData();\n      return result;\n    };\n\n    const notesAsString = localStorage.getItem(NOTES_KEY);\n    const notes = notesAsString ? JSON.parse(notesAsString) : [];\n    this.inMemoryGateway = new InMemoryNotesGateway(notes);\n  }\n\n  updateData() {\n    const updatedNotes = this.inMemoryGateway.getNotesArray();\n    localStorage.setItem(NOTES_KEY, JSON.stringify(updatedNotes));\n  }\n\n}","map":{"version":3,"names":["InMemoryNotesGateway","NOTES_KEY","LocalStorageNotesGateway","constructor","inMemoryGateway","getMainNote","result","updateData","getNote","id","saveNote","updatedNote","moveNote","data","notesAsString","localStorage","getItem","notes","JSON","parse","updatedNotes","getNotesArray","setItem","stringify"],"sources":["/Users/starkylife/projects/learning-system-app/packages/web/src/gateways/local-storage-notes.gateway.ts"],"sourcesContent":["import {\n  InMemoryDbNote,\n  InMemoryNotesGateway,\n} from \"./in-memory-notes.gateway\";\nimport { NotesGateway } from \"./notes.gateway\";\n\nconst NOTES_KEY = \"notes\";\n\nexport class LocalStorageNotesGateway implements NotesGateway {\n  private inMemoryGateway: InMemoryNotesGateway;\n\n  constructor() {\n    const notesAsString = localStorage.getItem(NOTES_KEY);\n    const notes: InMemoryDbNote[] = notesAsString\n      ? JSON.parse(notesAsString)\n      : [];\n\n    this.inMemoryGateway = new InMemoryNotesGateway(notes);\n  }\n\n  getMainNote: NotesGateway[\"getMainNote\"] = async () => {\n    const result = await this.inMemoryGateway.getMainNote();\n\n    this.updateData();\n\n    return result;\n  };\n  getNote: NotesGateway[\"getNote\"] = async (id) => {\n    const result = await this.inMemoryGateway.getNote(id);\n\n    this.updateData();\n\n    return result;\n  };\n  saveNote: NotesGateway[\"saveNote\"] = async (updatedNote) => {\n    const result = await this.inMemoryGateway.saveNote(updatedNote);\n\n    this.updateData();\n\n    return result;\n  };\n\n  moveNote: NotesGateway[\"moveNote\"] = async (data) => {\n    const result = await this.inMemoryGateway.moveNote(data);\n\n    this.updateData();\n\n    return result;\n  };\n\n  private updateData() {\n    const updatedNotes = this.inMemoryGateway.getNotesArray();\n    localStorage.setItem(NOTES_KEY, JSON.stringify(updatedNotes));\n  }\n}\n"],"mappings":"AAAA,SAEEA,oBAFF,QAGO,2BAHP;AAMA,MAAMC,SAAS,GAAG,OAAlB;AAEA,OAAO,MAAMC,wBAAN,CAAuD;EAG5DC,WAAW,GAAG;IAAA,KAFNC,eAEM;;IAAA,KASdC,WATc,GAS6B,YAAY;MACrD,MAAMC,MAAM,GAAG,MAAM,KAAKF,eAAL,CAAqBC,WAArB,EAArB;MAEA,KAAKE,UAAL;MAEA,OAAOD,MAAP;IACD,CAfa;;IAAA,KAgBdE,OAhBc,GAgBqB,MAAOC,EAAP,IAAc;MAC/C,MAAMH,MAAM,GAAG,MAAM,KAAKF,eAAL,CAAqBI,OAArB,CAA6BC,EAA7B,CAArB;MAEA,KAAKF,UAAL;MAEA,OAAOD,MAAP;IACD,CAtBa;;IAAA,KAuBdI,QAvBc,GAuBuB,MAAOC,WAAP,IAAuB;MAC1D,MAAML,MAAM,GAAG,MAAM,KAAKF,eAAL,CAAqBM,QAArB,CAA8BC,WAA9B,CAArB;MAEA,KAAKJ,UAAL;MAEA,OAAOD,MAAP;IACD,CA7Ba;;IAAA,KA+BdM,QA/Bc,GA+BuB,MAAOC,IAAP,IAAgB;MACnD,MAAMP,MAAM,GAAG,MAAM,KAAKF,eAAL,CAAqBQ,QAArB,CAA8BC,IAA9B,CAArB;MAEA,KAAKN,UAAL;MAEA,OAAOD,MAAP;IACD,CArCa;;IACZ,MAAMQ,aAAa,GAAGC,YAAY,CAACC,OAAb,CAAqBf,SAArB,CAAtB;IACA,MAAMgB,KAAuB,GAAGH,aAAa,GACzCI,IAAI,CAACC,KAAL,CAAWL,aAAX,CADyC,GAEzC,EAFJ;IAIA,KAAKV,eAAL,GAAuB,IAAIJ,oBAAJ,CAAyBiB,KAAzB,CAAvB;EACD;;EAgCOV,UAAU,GAAG;IACnB,MAAMa,YAAY,GAAG,KAAKhB,eAAL,CAAqBiB,aAArB,EAArB;IACAN,YAAY,CAACO,OAAb,CAAqBrB,SAArB,EAAgCiB,IAAI,CAACK,SAAL,CAAeH,YAAf,CAAhC;EACD;;AA7C2D"},"metadata":{},"sourceType":"module"}