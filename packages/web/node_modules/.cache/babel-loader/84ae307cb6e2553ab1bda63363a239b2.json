{"ast":null,"code":"var _jsxFileName = \"/Users/starkylife/projects/learning-system-app/packages/web/src/pages/notes/note-block.tsx\",\n    _s = $RefreshSig$();\n\nimport { Button, Divider, Grid, InputBase, Paper } from \"@mui/material\";\nimport DeleteIcon from \"@mui/icons-material/Delete\";\nimport NavigateNextIcon from \"@mui/icons-material/NavigateNext\";\nimport DoubleArrowIcon from \"@mui/icons-material/DoubleArrow\";\nimport DragIndicatorIcon from \"@mui/icons-material/DragIndicator\";\nimport { useCallback } from \"react\";\nimport { PositionalDropzone } from \"./positional-dropzone\";\nimport { useOneInputForm } from \"./use-one-input-form\";\nimport { useNoteDragAndDrop } from \"./use-note-drag-and-drop\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const NoteBlock = _ref => {\n  _s();\n\n  let {\n    id,\n    text,\n    onSave,\n    onDelete,\n    onOpen,\n    onMoveIn,\n    onChangePosition\n  } = _ref;\n  const {\n    textValue,\n    handleTextChange\n  } = useOneInputForm(text);\n  const handleTextSave = useCallback(() => {\n    onSave(id, textValue);\n  }, [id, textValue, onSave]);\n  const handleNoteDelete = useCallback(() => {\n    onDelete(id);\n  }, [id, onDelete]);\n  const handleContentsOpen = useCallback(() => {\n    onOpen(id);\n  }, [id, onOpen]);\n  const {\n    isDragging,\n    showPositionalDropzones,\n    isOverUpDropzone,\n    isOverDownDropzone,\n    isOverNoteDropzone,\n    canDrop,\n    upDropzoneRef,\n    downDropzoneRef,\n    noteRef\n  } = useNoteDragAndDrop(id, onMoveIn, onChangePosition);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [showPositionalDropzones && /*#__PURE__*/_jsxDEV(PositionalDropzone, {\n      type: \"up\",\n      isOver: isOverUpDropzone,\n      ref: upDropzoneRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 4,\n      sx: {\n        opacity: isDragging ? 0.3 : 1,\n        background: isOverNoteDropzone && canDrop ? \"rgba(0,0,0,0.1)\" : undefined\n      },\n      ref: noteRef,\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: \"auto\",\n          sx: {\n            display: \"flex\",\n            alignItems: \"center\"\n          },\n          children: canDrop ? /*#__PURE__*/_jsxDEV(DoubleArrowIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(DragIndicatorIcon, {\n            cursor: \"move\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: \"auto\",\n          children: /*#__PURE__*/_jsxDEV(Divider, {\n            orientation: \"vertical\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: true,\n          p: 1,\n          children: /*#__PURE__*/_jsxDEV(InputBase, {\n            fullWidth: true,\n            multiline: true,\n            placeholder: \"\\u041D\\u0430\\u043F\\u0438\\u0448\\u0438\\u0442\\u0435 \\u0447\\u0442\\u043E-\\u043D\\u0438\\u0431\\u0443\\u0434\\u044C...\",\n            value: textValue,\n            onChange: handleTextChange,\n            onBlur: handleTextSave,\n            sx: {\n              height: \"100%\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: \"auto\",\n          children: /*#__PURE__*/_jsxDEV(Divider, {\n            orientation: \"vertical\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: \"auto\",\n          display: \"flex\",\n          flexDirection: \"column\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            onClick: handleNoteDelete,\n            children: /*#__PURE__*/_jsxDEV(DeleteIcon, {\n              color: \"action\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: handleContentsOpen,\n            sx: {\n              flex: 1\n            },\n            children: /*#__PURE__*/_jsxDEV(NavigateNextIcon, {\n              color: \"action\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), showPositionalDropzones && /*#__PURE__*/_jsxDEV(PositionalDropzone, {\n      type: \"down\",\n      isOver: isOverDownDropzone,\n      ref: downDropzoneRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n};\n\n_s(NoteBlock, \"OkrNbbvHQyU5SKQcfZ3tkparc1g=\", false, function () {\n  return [useOneInputForm, useNoteDragAndDrop];\n});\n\n_c = NoteBlock;\n\nvar _c;\n\n$RefreshReg$(_c, \"NoteBlock\");","map":{"version":3,"names":["Button","Divider","Grid","InputBase","Paper","DeleteIcon","NavigateNextIcon","DoubleArrowIcon","DragIndicatorIcon","useCallback","PositionalDropzone","useOneInputForm","useNoteDragAndDrop","NoteBlock","id","text","onSave","onDelete","onOpen","onMoveIn","onChangePosition","textValue","handleTextChange","handleTextSave","handleNoteDelete","handleContentsOpen","isDragging","showPositionalDropzones","isOverUpDropzone","isOverDownDropzone","isOverNoteDropzone","canDrop","upDropzoneRef","downDropzoneRef","noteRef","opacity","background","undefined","display","alignItems","height","flex"],"sources":["/Users/starkylife/projects/learning-system-app/packages/web/src/pages/notes/note-block.tsx"],"sourcesContent":["import { Button, Divider, Grid, InputBase, Paper } from \"@mui/material\";\nimport DeleteIcon from \"@mui/icons-material/Delete\";\nimport NavigateNextIcon from \"@mui/icons-material/NavigateNext\";\nimport DoubleArrowIcon from \"@mui/icons-material/DoubleArrow\";\nimport DragIndicatorIcon from \"@mui/icons-material/DragIndicator\";\nimport { useCallback } from \"react\";\nimport { PositionalDropzone } from \"./positional-dropzone\";\nimport { useOneInputForm } from \"./use-one-input-form\";\nimport { useNoteDragAndDrop } from \"./use-note-drag-and-drop\";\n\ntype Props = {\n  id: string;\n  text: string;\n  onSave: (id: string, title: string) => void;\n  onDelete: (id: string) => void;\n  onOpen: (id: string) => void;\n  onMoveIn: (id: string, newParentId: string) => void;\n  onChangePosition: (\n    id: string,\n    relatedNoteId: string,\n    position: \"up\" | \"down\"\n  ) => void;\n};\n\nexport const NoteBlock: React.FC<Props> = ({\n  id,\n  text,\n  onSave,\n  onDelete,\n  onOpen,\n  onMoveIn,\n  onChangePosition,\n}) => {\n  const { textValue, handleTextChange } = useOneInputForm(text);\n\n  const handleTextSave = useCallback(() => {\n    onSave(id, textValue);\n  }, [id, textValue, onSave]);\n  const handleNoteDelete = useCallback(() => {\n    onDelete(id);\n  }, [id, onDelete]);\n  const handleContentsOpen = useCallback(() => {\n    onOpen(id);\n  }, [id, onOpen]);\n\n  const {\n    isDragging,\n    showPositionalDropzones,\n    isOverUpDropzone,\n    isOverDownDropzone,\n    isOverNoteDropzone,\n    canDrop,\n    upDropzoneRef,\n    downDropzoneRef,\n    noteRef,\n  } = useNoteDragAndDrop(id, onMoveIn, onChangePosition);\n\n  return (\n    <div>\n      {showPositionalDropzones && (\n        <PositionalDropzone\n          type=\"up\"\n          isOver={isOverUpDropzone}\n          ref={upDropzoneRef}\n        />\n      )}\n      <Paper\n        elevation={4}\n        sx={{\n          opacity: isDragging ? 0.3 : 1,\n          background:\n            isOverNoteDropzone && canDrop ? \"rgba(0,0,0,0.1)\" : undefined,\n        }}\n        ref={noteRef}\n      >\n        <Grid container>\n          <Grid\n            item\n            xs=\"auto\"\n            sx={{\n              display: \"flex\",\n              alignItems: \"center\",\n            }}\n          >\n            {canDrop ? (\n              <DoubleArrowIcon />\n            ) : (\n              <DragIndicatorIcon cursor=\"move\" />\n            )}\n          </Grid>\n          <Grid item xs=\"auto\">\n            <Divider orientation=\"vertical\" />\n          </Grid>\n          <Grid item xs p={1}>\n            <InputBase\n              fullWidth\n              multiline\n              placeholder=\"Напишите что-нибудь...\"\n              value={textValue}\n              onChange={handleTextChange}\n              onBlur={handleTextSave}\n              sx={{ height: \"100%\" }}\n            />\n          </Grid>\n          <Grid item xs=\"auto\">\n            <Divider orientation=\"vertical\" />\n          </Grid>\n          <Grid item xs=\"auto\" display=\"flex\" flexDirection=\"column\">\n            <Button onClick={handleNoteDelete}>\n              <DeleteIcon color=\"action\" />\n            </Button>\n            <Divider />\n            <Button onClick={handleContentsOpen} sx={{ flex: 1 }}>\n              <NavigateNextIcon color=\"action\" />\n            </Button>\n          </Grid>\n        </Grid>\n      </Paper>\n      {showPositionalDropzones && (\n        <PositionalDropzone\n          type=\"down\"\n          isOver={isOverDownDropzone}\n          ref={downDropzoneRef}\n        />\n      )}\n    </div>\n  );\n};\n"],"mappings":";;;AAAA,SAASA,MAAT,EAAiBC,OAAjB,EAA0BC,IAA1B,EAAgCC,SAAhC,EAA2CC,KAA3C,QAAwD,eAAxD;AACA,OAAOC,UAAP,MAAuB,4BAAvB;AACA,OAAOC,gBAAP,MAA6B,kCAA7B;AACA,OAAOC,eAAP,MAA4B,iCAA5B;AACA,OAAOC,iBAAP,MAA8B,mCAA9B;AACA,SAASC,WAAT,QAA4B,OAA5B;AACA,SAASC,kBAAT,QAAmC,uBAAnC;AACA,SAASC,eAAT,QAAgC,sBAAhC;AACA,SAASC,kBAAT,QAAmC,0BAAnC;;AAgBA,OAAO,MAAMC,SAA0B,GAAG,QAQpC;EAAA;;EAAA,IARqC;IACzCC,EADyC;IAEzCC,IAFyC;IAGzCC,MAHyC;IAIzCC,QAJyC;IAKzCC,MALyC;IAMzCC,QANyC;IAOzCC;EAPyC,CAQrC;EACJ,MAAM;IAAEC,SAAF;IAAaC;EAAb,IAAkCX,eAAe,CAACI,IAAD,CAAvD;EAEA,MAAMQ,cAAc,GAAGd,WAAW,CAAC,MAAM;IACvCO,MAAM,CAACF,EAAD,EAAKO,SAAL,CAAN;EACD,CAFiC,EAE/B,CAACP,EAAD,EAAKO,SAAL,EAAgBL,MAAhB,CAF+B,CAAlC;EAGA,MAAMQ,gBAAgB,GAAGf,WAAW,CAAC,MAAM;IACzCQ,QAAQ,CAACH,EAAD,CAAR;EACD,CAFmC,EAEjC,CAACA,EAAD,EAAKG,QAAL,CAFiC,CAApC;EAGA,MAAMQ,kBAAkB,GAAGhB,WAAW,CAAC,MAAM;IAC3CS,MAAM,CAACJ,EAAD,CAAN;EACD,CAFqC,EAEnC,CAACA,EAAD,EAAKI,MAAL,CAFmC,CAAtC;EAIA,MAAM;IACJQ,UADI;IAEJC,uBAFI;IAGJC,gBAHI;IAIJC,kBAJI;IAKJC,kBALI;IAMJC,OANI;IAOJC,aAPI;IAQJC,eARI;IASJC;EATI,IAUFtB,kBAAkB,CAACE,EAAD,EAAKK,QAAL,EAAeC,gBAAf,CAVtB;EAYA,oBACE;IAAA,WACGO,uBAAuB,iBACtB,QAAC,kBAAD;MACE,IAAI,EAAC,IADP;MAEE,MAAM,EAAEC,gBAFV;MAGE,GAAG,EAAEI;IAHP;MAAA;MAAA;MAAA;IAAA,QAFJ,eAQE,QAAC,KAAD;MACE,SAAS,EAAE,CADb;MAEE,EAAE,EAAE;QACFG,OAAO,EAAET,UAAU,GAAG,GAAH,GAAS,CAD1B;QAEFU,UAAU,EACRN,kBAAkB,IAAIC,OAAtB,GAAgC,iBAAhC,GAAoDM;MAHpD,CAFN;MAOE,GAAG,EAAEH,OAPP;MAAA,uBASE,QAAC,IAAD;QAAM,SAAS,MAAf;QAAA,wBACE,QAAC,IAAD;UACE,IAAI,MADN;UAEE,EAAE,EAAC,MAFL;UAGE,EAAE,EAAE;YACFI,OAAO,EAAE,MADP;YAEFC,UAAU,EAAE;UAFV,CAHN;UAAA,UAQGR,OAAO,gBACN,QAAC,eAAD;YAAA;YAAA;YAAA;UAAA,QADM,gBAGN,QAAC,iBAAD;YAAmB,MAAM,EAAC;UAA1B;YAAA;YAAA;YAAA;UAAA;QAXJ;UAAA;UAAA;UAAA;QAAA,QADF,eAeE,QAAC,IAAD;UAAM,IAAI,MAAV;UAAW,EAAE,EAAC,MAAd;UAAA,uBACE,QAAC,OAAD;YAAS,WAAW,EAAC;UAArB;YAAA;YAAA;YAAA;UAAA;QADF;UAAA;UAAA;UAAA;QAAA,QAfF,eAkBE,QAAC,IAAD;UAAM,IAAI,MAAV;UAAW,EAAE,MAAb;UAAc,CAAC,EAAE,CAAjB;UAAA,uBACE,QAAC,SAAD;YACE,SAAS,MADX;YAEE,SAAS,MAFX;YAGE,WAAW,EAAC,6GAHd;YAIE,KAAK,EAAEV,SAJT;YAKE,QAAQ,EAAEC,gBALZ;YAME,MAAM,EAAEC,cANV;YAOE,EAAE,EAAE;cAAEiB,MAAM,EAAE;YAAV;UAPN;YAAA;YAAA;YAAA;UAAA;QADF;UAAA;UAAA;UAAA;QAAA,QAlBF,eA6BE,QAAC,IAAD;UAAM,IAAI,MAAV;UAAW,EAAE,EAAC,MAAd;UAAA,uBACE,QAAC,OAAD;YAAS,WAAW,EAAC;UAArB;YAAA;YAAA;YAAA;UAAA;QADF;UAAA;UAAA;UAAA;QAAA,QA7BF,eAgCE,QAAC,IAAD;UAAM,IAAI,MAAV;UAAW,EAAE,EAAC,MAAd;UAAqB,OAAO,EAAC,MAA7B;UAAoC,aAAa,EAAC,QAAlD;UAAA,wBACE,QAAC,MAAD;YAAQ,OAAO,EAAEhB,gBAAjB;YAAA,uBACE,QAAC,UAAD;cAAY,KAAK,EAAC;YAAlB;cAAA;cAAA;cAAA;YAAA;UADF;YAAA;YAAA;YAAA;UAAA,QADF,eAIE,QAAC,OAAD;YAAA;YAAA;YAAA;UAAA,QAJF,eAKE,QAAC,MAAD;YAAQ,OAAO,EAAEC,kBAAjB;YAAqC,EAAE,EAAE;cAAEgB,IAAI,EAAE;YAAR,CAAzC;YAAA,uBACE,QAAC,gBAAD;cAAkB,KAAK,EAAC;YAAxB;cAAA;cAAA;cAAA;YAAA;UADF;YAAA;YAAA;YAAA;UAAA,QALF;QAAA;UAAA;UAAA;UAAA;QAAA,QAhCF;MAAA;QAAA;QAAA;QAAA;MAAA;IATF;MAAA;MAAA;MAAA;IAAA,QARF,EA4DGd,uBAAuB,iBACtB,QAAC,kBAAD;MACE,IAAI,EAAC,MADP;MAEE,MAAM,EAAEE,kBAFV;MAGE,GAAG,EAAEI;IAHP;MAAA;MAAA;MAAA;IAAA,QA7DJ;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAsED,CAvGM;;GAAMpB,S;UAS6BF,e,EAsBpCC,kB;;;KA/BOC,S"},"metadata":{},"sourceType":"module"}