{"ast":null,"code":"var _jsxFileName = \"/Users/starkylife/projects/learning-system-app/packages/web/src/pages/notes/index.tsx\",\n    _s = $RefreshSig$();\n\nimport { Container, IconButton, Stack, Typography } from \"@mui/material\";\nimport AddIcon from \"@mui/icons-material/Add\";\nimport { useContext, useEffect, useMemo, useState } from \"react\";\nimport { NoteBlock } from \"./note-block\";\nimport { NotesGatewayContext } from \"../../gateways/notes.gateway\";\nimport { NotesController } from \"./model/notes.controller\";\nimport { DEFAULT_NOTES_VIEW_MODEL } from \"./model/notes.view-model\";\nimport { createViewModelInteractor } from \"../../shared/lib/view-model-interactor\";\nimport { BackComponent } from \"./back-component\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const NotesPage = () => {\n  _s();\n\n  const notesGateway = useContext(NotesGatewayContext);\n  if (!notesGateway) throw new Error(\"NotesGateway hasn't been connected!\");\n  const [viewModel, setViewModel] = useState(DEFAULT_NOTES_VIEW_MODEL);\n  const notInitializedController = useMemo(() => new NotesController(), []);\n  const controller = useMemo(() => notInitializedController.setDependencies({\n    notesGateway,\n    viewModel: createViewModelInteractor(viewModel, setViewModel)\n  }), [notInitializedController, notesGateway, viewModel]);\n  useEffect(() => {\n    controller.init();\n  }, [controller]);\n\n  if (!viewModel.currentNote) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Not ready\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"md\",\n    sx: {\n      padding: \"16px\"\n    },\n    children: [viewModel.currentNote.parentId && /*#__PURE__*/_jsxDEV(BackComponent, {\n      onBack: controller.goToUpperLevel,\n      onDrop: controller.moveNoteOut\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 9\n    }, this), viewModel.currentNote.text && /*#__PURE__*/_jsxDEV(Typography, {\n      noWrap: true,\n      children: viewModel.currentNote.text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Stack, {\n      spacing: 2,\n      children: [viewModel.currentNote.content.map(note => /*#__PURE__*/_jsxDEV(NoteBlock, {\n        id: note.id,\n        text: note.text,\n        onSave: controller.saveChildNote,\n        onDelete: controller.deleteChildNote,\n        onOpen: controller.openChildNote,\n        onMoveIn: controller.moveNoteIn,\n        onChangePosition: controller.changeNotePosition\n      }, note.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(IconButton, {\n          color: \"primary\",\n          size: \"large\",\n          onClick: controller.addChildNote,\n          children: /*#__PURE__*/_jsxDEV(AddIcon, {\n            fontSize: \"inherit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 5\n  }, this);\n};\n\n_s(NotesPage, \"xamWCF+Anj52RxnEqlacsGWJnm0=\");\n\n_c = NotesPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"NotesPage\");","map":{"version":3,"names":["Container","IconButton","Stack","Typography","AddIcon","useContext","useEffect","useMemo","useState","NoteBlock","NotesGatewayContext","NotesController","DEFAULT_NOTES_VIEW_MODEL","createViewModelInteractor","BackComponent","NotesPage","notesGateway","Error","viewModel","setViewModel","notInitializedController","controller","setDependencies","init","currentNote","padding","parentId","goToUpperLevel","moveNoteOut","text","content","map","note","id","saveChildNote","deleteChildNote","openChildNote","moveNoteIn","changeNotePosition","addChildNote"],"sources":["/Users/starkylife/projects/learning-system-app/packages/web/src/pages/notes/index.tsx"],"sourcesContent":["import { Container, IconButton, Stack, Typography } from \"@mui/material\";\nimport AddIcon from \"@mui/icons-material/Add\";\nimport { useContext, useEffect, useMemo, useState } from \"react\";\nimport { NoteBlock } from \"./note-block\";\nimport { NotesGatewayContext } from \"../../gateways/notes.gateway\";\nimport { NotesController } from \"./model/notes.controller\";\nimport { DEFAULT_NOTES_VIEW_MODEL } from \"./model/notes.view-model\";\nimport { createViewModelInteractor } from \"../../shared/lib/view-model-interactor\";\nimport { BackComponent } from \"./back-component\";\n\nexport const NotesPage: React.FC = () => {\n  const notesGateway = useContext(NotesGatewayContext);\n  if (!notesGateway) throw new Error(\"NotesGateway hasn't been connected!\");\n\n  const [viewModel, setViewModel] = useState(DEFAULT_NOTES_VIEW_MODEL);\n\n  const notInitializedController = useMemo(() => new NotesController(), []);\n  const controller = useMemo(\n    () =>\n      notInitializedController.setDependencies({\n        notesGateway,\n        viewModel: createViewModelInteractor(viewModel, setViewModel),\n      }),\n    [notInitializedController, notesGateway, viewModel]\n  );\n\n  useEffect(() => {\n    controller.init();\n  }, [controller]);\n\n  if (!viewModel.currentNote) {\n    return <div>Not ready</div>;\n  }\n\n  return (\n    <Container maxWidth=\"md\" sx={{ padding: \"16px\" }}>\n      {viewModel.currentNote.parentId && (\n        <BackComponent\n          onBack={controller.goToUpperLevel}\n          onDrop={controller.moveNoteOut}\n        />\n      )}\n      {viewModel.currentNote.text && (\n        <Typography noWrap>{viewModel.currentNote.text}</Typography>\n      )}\n      <Stack spacing={2}>\n        {viewModel.currentNote.content.map((note) => (\n          <NoteBlock\n            key={note.id}\n            id={note.id}\n            text={note.text}\n            onSave={controller.saveChildNote}\n            onDelete={controller.deleteChildNote}\n            onOpen={controller.openChildNote}\n            onMoveIn={controller.moveNoteIn}\n            onChangePosition={controller.changeNotePosition}\n          />\n        ))}\n        <div>\n          <IconButton\n            color=\"primary\"\n            size=\"large\"\n            onClick={controller.addChildNote}\n          >\n            <AddIcon fontSize=\"inherit\" />\n          </IconButton>\n        </div>\n      </Stack>\n    </Container>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}